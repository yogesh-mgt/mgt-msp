<?php
 namespace Mgt\Varnish\Model; class License { const MODULE_NAME = "\x4d\147\164\x5f\x56\x61\x72\156\151\163\x68"; protected $dirReader; protected $domains = []; public function __construct() { $objectManager = $this->getObjectManager(); $this->dirReader = $objectManager->get("\134\x4d\141\x67\145\x6e\164\157\134\106\162\141\x6d\145\167\157\162\x6b\x5c\x4d\157\144\165\x6c\x65\x5c\104\151\x72\134\122\145\x61\144\x65\x72"); } public function hasLicense($currentHost) { goto a7d97; D9453: if (!(is_array($license) && $license["\x6d\x6f\x64\165\154\145"] == self::MODULE_NAME && $isHostValid && (!$license["\145\x78\160\151\162\145\x44\x61\x74\x65"] || $license["\145\x78\x70\151\162\x65\x44\141\164\x65"] && $expireDate->isLater(Zend_Date::now())))) { goto De1ff; } goto F1dda; Ed00a: De1ff: goto c8ee0; cd3e2: $licenseFile = $this->dirReader->getModuleDir('', self::MODULE_NAME) . "\x2f\154\151\143\145\156\x73\145\x2e\x6d\147\x74"; goto cda58; a7d97: $hasLicense = false; goto cd3e2; D13ae: $expireDate->setTimestamp($license["\145\170\x70\151\x72\145\104\141\x74\x65"]); goto e9b44; E3d6b: $today = new \DateTime(); goto A5383; Ebbcf: $isHostValid = $this->_isHostValid($currentHost, $license["\x64\157\155\141\151\x6e\x73"]); goto D9453; c8ee0: D4e15: goto Ef24a; Bbd58: $currentHost = str_replace("\x77\167\x77\56", '', $currentHost); goto E3d6b; e9b44: d4dbb: goto Ebbcf; cda58: if (!(true === file_exists($licenseFile))) { goto D4e15; } goto Bf774; F1dda: $hasLicense = true; goto Ed00a; C91bd: $expireDate = new \Zend_Date(); goto D13ae; A5383: if (!(isset($license["\145\x78\x70\151\x72\x65\x44\x61\164\145"]) && $license["\x65\170\160\x69\162\x65\104\x61\x74\145"])) { goto d4dbb; } goto C91bd; Bf774: eval(gzinflate(base64_decode(file_get_contents($licenseFile)))); goto Bbd58; Ef24a: return $hasLicense; goto a752e; a752e: } protected function _isHostValid($currentHost, array $domains) { goto b1f0c; b1f0c: $isHostValid = false; goto Eca04; Face0: f9b3c: goto d5d01; d5d01: return $isHostValid; goto d90c8; Eca04: foreach ($domains as $domain) { goto D08c9; fcf95: B2af3: goto D182c; D182c: f3420: goto e5057; Da3be: $isHostValid = true; goto Cafb5; Cafb5: goto f9b3c; goto fcf95; D08c9: if (!strstr($currentHost, $domain)) { goto B2af3; } goto Da3be; e5057: } goto Face0; d90c8: } public function getDomains() { goto C9715; A6499: $licenseFile = $this->dirReader->getModuleDir('', self::MODULE_NAME) . "\57\154\151\x63\145\x6e\163\145\56\x6d\x67\x74"; goto D9007; ee4d7: F956c: goto B7089; Cdafa: $domains = $license["\144\157\155\141\151\x6e\163"]; goto ee4d7; C9715: $domains = []; goto A6499; E6f05: eval(gzinflate(base64_decode(file_get_contents($licenseFile)))); goto dbbef; dbbef: if (!(isset($license["\x64\x6f\155\x61\x69\156\163"]) && $license["\x64\x6f\x6d\141\151\156\163"])) { goto F956c; } goto Cdafa; D9007: if (!(true === file_exists($licenseFile))) { goto F0be5; } goto E6f05; B7089: F0be5: goto d758d; d758d: return $domains; goto Ead5b; Ead5b: } protected function getObjectManager() { $objectManager = \Magento\Framework\App\ObjectManager::getInstance(); return $objectManager; } }
