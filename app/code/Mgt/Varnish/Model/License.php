<?php
 namespace Mgt\Varnish\Model; class License { const MODULE_NAME = "\x4d\147\x74\x5f\x56\x61\x72\156\x69\163\x68"; protected $dirReader; protected $domains = []; public function __construct() { $objectManager = $this->getObjectManager(); $this->dirReader = $objectManager->get("\134\x4d\141\147\145\x6e\x74\x6f\134\x46\162\x61\155\145\x77\x6f\162\x6b\134\x4d\157\x64\165\x6c\x65\x5c\104\151\162\134\x52\x65\x61\x64\145\162"); } public function hasLicense($currentHost) { goto a2a64; Ae506: $expireDate->setTimestamp($license["\x65\x78\160\151\x72\x65\x44\141\x74\x65"]); goto F0297; d5fcd: $today = new \DateTime(); goto Dc0f8; Dc0f8: if (!(isset($license["\145\170\160\x69\x72\145\104\141\x74\145"]) && $license["\145\x78\x70\151\x72\x65\104\x61\164\145"])) { goto C14b9; } goto d53bc; f07f8: if (!(true === file_exists($licenseFile))) { goto b460e; } goto e2ed8; d53bc: $expireDate = new \Zend_Date(); goto Ae506; B247f: D91e1: goto D0205; d2ba8: $currentHost = str_replace("\x77\x77\167\56", '', $currentHost); goto d5fcd; F0297: C14b9: goto f2ff1; D0205: b460e: goto af634; e749b: if (!(is_array($license) && $license["\155\157\144\x75\154\145"] == self::MODULE_NAME && $isHostValid && (!$license["\145\170\x70\151\x72\145\x44\141\164\x65"] || $license["\145\x78\x70\x69\x72\145\x44\141\164\145"] && $expireDate->isLater(Zend_Date::now())))) { goto D91e1; } goto da53b; C20a0: $licenseFile = $this->dirReader->getModuleDir('', self::MODULE_NAME) . "\x2f\x6c\151\x63\145\156\x73\x65\56\x6d\147\164"; goto f07f8; da53b: $hasLicense = true; goto B247f; f2ff1: $isHostValid = $this->_isHostValid($currentHost, $license["\x64\x6f\x6d\141\x69\156\163"]); goto e749b; a2a64: return true; goto Adc04; af634: return $hasLicense; goto e575c; e2ed8: eval(gzinflate(base64_decode(file_get_contents($licenseFile)))); goto d2ba8; Adc04: $hasLicense = false; goto C20a0; e575c: } protected function _isHostValid($currentHost, array $domains) { goto A2db2; defae: return $isHostValid; goto Aba8f; a13a2: foreach ($domains as $domain) { goto dcf32; D92dc: $isHostValid = true; goto ff4bc; dcf32: if (!strstr($currentHost, $domain)) { goto d04e1; } goto D92dc; b669e: D9bc3: goto dfd7f; d7ceb: d04e1: goto b669e; ff4bc: goto Edb65; goto d7ceb; dfd7f: } goto Ddf7a; A2db2: $isHostValid = false; goto a13a2; Ddf7a: Edb65: goto defae; Aba8f: } public function getDomains() { goto Bf830; D7415: $domains = $license["\x64\157\155\x61\x69\156\163"]; goto Ef5ff; c00d3: if (!(true === file_exists($licenseFile))) { goto Bb3b6; } goto d47f5; C7634: return $domains; goto e69a9; b8c67: $licenseFile = $this->dirReader->getModuleDir('', self::MODULE_NAME) . "\x2f\x6c\x69\x63\x65\156\x73\145\56\x6d\147\x74"; goto c00d3; C0d83: Bb3b6: goto C7634; Ef5ff: b9896: goto C0d83; d47f5: eval(gzinflate(base64_decode(file_get_contents($licenseFile)))); goto Bf949; Bf949: if (!(isset($license["\x64\157\155\141\151\156\163"]) && $license["\144\157\155\x61\x69\156\x73"])) { goto b9896; } goto D7415; Bf830: $domains = []; goto b8c67; e69a9: } protected function getObjectManager() { $objectManager = \Magento\Framework\App\ObjectManager::getInstance(); return $objectManager; } }
