<?php
 namespace Mgt\Varnish\Controller\Api; class PurgeUrl extends \Magento\Framework\App\Action\Action { protected $cachePurger; protected $config; public function __construct(\Magento\Framework\App\Action\Context $context, \Magento\CacheInvalidate\Model\PurgeCache $cachePurger, \Mgt\Varnish\Model\Cache\Config $config) { goto Ab0c5; cd797: $this->config = $config; goto d644c; d644c: parent::__construct($context); goto D8c0e; Ab0c5: $this->cachePurger = $cachePurger; goto cd797; D8c0e: } public function execute() { goto a48b5; a48b5: $request = $this->getRequest(); goto d78e8; Cd842: try { goto E765d; Dd996: if (!($secretKey != $apiSecretKey)) { goto Dcb80; } goto f1cb3; C8e8c: Dcb80: goto F385b; ae070: $body = ["\x73\165\x63\143\x65\163\x73" => 1, "\x6d\145\163\163\141\x67\x65" => sprintf("\124\150\145\x20\x55\x52\114\x20\42\45\x73\x22\x20\150\141\163\x20\x62\x65\145\156\40\160\x75\162\147\x65\144\56", $url)]; goto F4096; f1cb3: throw new \Exception("\x53\x65\x63\x72\x65\x74\40\x61\160\151\40\153\x65\x79\x20\151\x73\40\156\157\x74\40\x63\x6f\x72\x72\145\143\x74"); goto C8e8c; E765d: $apiSecretKey = $this->config->getApiSecretKey(); goto Dd996; F385b: $this->cachePurger->purgeUrlRequest($url); goto ae070; F4096: } catch (\Exception $e) { $errorMessage = $e->getMessage(); $body = ["\x73\x75\x63\143\145\163\163" => 0, "\155\145\x73\x73\x61\147\145" => $errorMessage]; } goto E046f; E046f: b4a34: goto c0743; Dc801: exit; goto Edca6; d78e8: $response = $this->getResponse(); goto e4511; F0550: $response->setHeader("\x43\157\156\164\x65\x6e\x74\x2d\124\x79\x70\145", "\x61\160\160\154\151\143\x61\x74\x69\x6f\x6e\57\x6a\x73\x6f\x6e"); goto a9a28; a9a28: $response->setBody($body); goto f8f15; Be13b: if (!($secretKey && $url)) { goto b4a34; } goto Cd842; e4511: $body = []; goto C1be4; c0743: $body = json_encode($body); goto F0550; Afa81: $url = $request->getParam("\165\162\x6c"); goto Be13b; f8f15: $response->sendResponse(); goto Dc801; C1be4: $secretKey = $request->getParam("\x73\145\143\162\145\x74\113\x65\171"); goto Afa81; Edca6: } }
